rule-providers:
  # ç§æœ‰åŸŸåè§„åˆ™ï¼ˆå±€åŸŸç½‘/æœ¬åœ°æœåŠ¡ï¼Œç›´æ¥è¿æ¥ï¼‰
  private:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.yaml
    path: ./ruleset/private.yaml
    behavior: domain
    interval: 86400  # æ¯æ—¥æ›´æ–°1æ¬¡
    format: yaml
    type: http
    timeout: 10      # æ–°å¢ï¼šè§„åˆ™ä¸‹è½½è¶…æ—¶10ç§’ï¼Œé¿å…å¡åŠ è½½ï¼ˆä¿®å¤é”™è¯¯ç‚¹1ï¼‰

  # ä¸­å›½å¤§é™†åŸŸåè§„åˆ™ï¼ˆå›½å†…ç½‘ç«™ï¼Œèµ°æœ¬åœ°ç½‘ç»œï¼‰
  cn_domain:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.yaml
    path: ./ruleset/cn_domain.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
    timeout: 10

  # ä¸­å›½å¤§é™†IPè§„åˆ™ï¼ˆå›½å†…IPæ®µï¼Œèµ°æœ¬åœ°ç½‘ç»œï¼‰
  cn_ip:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.yaml
    path: ./ruleset/cn_ip.yaml
    behavior: ipcidr
    interval: 86400
    format: yaml
    type: http
    timeout: 10

  # éä¸­å›½å¤§é™†åŸŸåè§„åˆ™ï¼ˆå¢ƒå¤–ç½‘ç«™ï¼Œèµ°ä»£ç†ï¼‰
  geolocation-!cn:
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/geolocation-!cn.yaml
    path: ./ruleset/geolocation-!cn.yaml
    behavior: domain
    interval: 86400
    format: yaml
    type: http
    timeout: 10

# ========================= ä»£ç†ç»„é…ç½®ï¼ˆä¿®å¤ï¼šè§£å†³ç­›é€‰é€»è¾‘å†²çªï¼‰ =========================
# å…³é”®ä¿®å¤ï¼šç§»é™¤ url-test ç±»å‹ç»„ä¸­çš„ include-all: trueï¼ˆä¸ filter å†²çªå¯¼è‡´èŠ‚ç‚¹ä¸åŠ è½½ï¼‰
proxy-groups:
  # 1. æ‰‹åŠ¨åˆ‡æ¢æ€»å…¥å£ï¼ˆç”¨æˆ·ä¸»åŠ¨é€‰æ‹©ï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Static.png
    name: æ‰‹åŠ¨åˆ‡æ¢
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - æ•…éšœè½¬ç§»
      - è´Ÿè½½å‡è¡¡
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - ç‹®åŸèŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹

  # 2. è‡ªåŠ¨é€‰æ‹©ï¼ˆæ™ºèƒ½é€‰æœ€ä¼˜èŠ‚ç‚¹ï¼Œæ—¥å¸¸é»˜è®¤ä½¿ç”¨ï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Urltest.png
    name: è‡ªåŠ¨é€‰æ‹©
    type: url-test
    interval: 300  # 5åˆ†é’Ÿæµ‹è¯•1æ¬¡
    timeout: 5     # è¶…æ—¶5ç§’
    retries: 2     # é‡è¯•2æ¬¡
    url: https://www.gstatic.com/generate_204  # ç¨³å®šæµ‹è¯•åœ°å€
    # ä¿®å¤ç‚¹2ï¼šç§»é™¤ include-all: trueï¼ˆä¸ proxies åˆ—è¡¨å†²çªï¼Œå¯¼è‡´èŠ‚ç‚¹åŠ è½½å¤±è´¥ï¼‰
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®|å¤±æ•ˆ|ä¸å¯ç”¨
    proxies:  # æ˜ç¡®æŒ‡å®šå­èŠ‚ç‚¹ï¼Œé¿å…ç­›é€‰å†²çª
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - ç‹®åŸèŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹

  # 3. åŒºåŸŸèŠ‚ç‚¹ç»„ï¼ˆä¿®å¤ï¼šç§»é™¤ include-allï¼Œä»…ç”¨ filter ç­›é€‰ï¼‰
  # é¦™æ¸¯èŠ‚ç‚¹ï¼šåŒ¹é…å¸¸è§å‘½åï¼ˆå¦‚â€œé¦™æ¸¯CN2â€â€œHK-BGPâ€ï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/HK.png
    name: é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    # ä¿®å¤ç‚¹3ï¼šä»…ä¿ç•™ filterï¼Œåˆ é™¤ include-allï¼ˆé¿å…é€»è¾‘å†²çªï¼‰
    filter: (?i)é¦™æ¸¯|Hong Kong|HK|ğŸ‡­ğŸ‡°|HKG|é¦™æ¸¯CN2|é¦™æ¸¯BGP|é¦™æ¸¯PCCW

  # å°æ¹¾èŠ‚ç‚¹ï¼šåŒ¹é…â€œå°æ¹¾â€â€œTWâ€åŠè¿è¥å•†
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/TW.png
    name: å°æ¹¾èŠ‚ç‚¹
    type: url-test
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)å°æ¹¾|Taiwan|TW|ğŸ‡¹ğŸ‡¼|TWN|å°æ¹¾ä¸­åç”µä¿¡|å°æ¹¾è¿œä¼ 

  # ç‹®åŸèŠ‚ç‚¹ï¼ˆæ–°åŠ å¡ï¼‰ï¼šåŒ¹é…â€œæ–°åŠ å¡â€â€œSGâ€åŠè¿è¥å•†
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/SG.png
    name: ç‹®åŸèŠ‚ç‚¹
    type: url-test
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)æ–°åŠ å¡|Singapore|SG|ğŸ‡¸ğŸ‡¬|SIN|ç‹®åŸ|æ–°åŠ å¡Singtel|æ–°åŠ å¡M1

  # æ—¥æœ¬èŠ‚ç‚¹ï¼šåŒ¹é…â€œæ—¥æœ¬â€â€œJPâ€åŠåŸå¸‚/è¿è¥å•†
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/JP.png
    name: æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)æ—¥æœ¬|Japan|JP|ğŸ‡¯ğŸ‡µ|JPN|ä¸œäº¬|å¤§é˜ª|æ—¥æœ¬SoftBank|æ—¥æœ¬KDDI

  # ç¾å›½èŠ‚ç‚¹ï¼šåŒ¹é…â€œç¾å›½â€â€œUSâ€åŠåŸå¸‚/è¿è¥å•†
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/US.png
    name: ç¾å›½èŠ‚ç‚¹
    type: url-test
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)ç¾å›½|USA|US|ğŸ‡ºğŸ‡¸|USA|æ´›æ‰çŸ¶|çº½çº¦|ç¾å›½AT&T|ç¾å›½Verizon

  # éŸ©å›½èŠ‚ç‚¹ï¼šåŒ¹é…â€œéŸ©å›½â€â€œKRâ€åŠåŸå¸‚/è¿è¥å•†
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/KR.png
    name: éŸ©å›½èŠ‚ç‚¹
    type: url-test
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    filter: (?i)éŸ©å›½|Korea|KR|ğŸ‡°ğŸ‡·|KOR|é¦–å°”|éŸ©å›½SKTC|éŸ©å›½KT

  # 4. æ•…éšœè½¬ç§»ï¼ˆèŠ‚ç‚¹å¤±æ•ˆè‡ªåŠ¨åˆ‡æ¢ï¼Œä¿éšœç¨³å®šï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Backup.png
    name: æ•…éšœè½¬ç§»
    type: fallback
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    proxies:  # æŒ‰ç‰©ç†è·ç¦»æ’åºï¼Œä¼˜å…ˆåˆ‡æ¢è¿‘ç¨‹èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - ç‹®åŸèŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹

  # 5. è´Ÿè½½å‡è¡¡ï¼ˆå¤šèŠ‚ç‚¹åˆ†æµï¼Œé™ä½å•èŠ‚ç‚¹å‹åŠ›ï¼‰
  - icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Balance.png
    name: è´Ÿè½½å‡è¡¡
    type: load-balance
    strategy: least-delay  # ä¼˜å…ˆåˆ†é…è‡³ä½å»¶è¿ŸèŠ‚ç‚¹
    interval: 300
    timeout: 5
    retries: 2
    url: https://www.gstatic.com/generate_204
    exclude-filter: (?i)GB|Traffic|Expire|Premium|é¢‘é“|è®¢é˜…|ISP|æµé‡|åˆ°æœŸ|é‡ç½®
    proxies:
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - ç‹®åŸèŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹

# ========================= è§„åˆ™é…ç½®ï¼ˆä¿®å¤ï¼šç»Ÿä¸€è§„åˆ™æ ¼å¼ï¼‰ =========================
# æŒ‰ã€ŒåŒ¹é…ä¼˜å…ˆçº§ã€æ’åºï¼Œé¿å…è§„åˆ™å†²çª
rules:
  # 1. ç§æœ‰åŸŸåï¼šç›´æ¥è¿æ¥ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
  - RULE-SET,private,DIRECT
  # 2. ä¸­å›½å¤§é™†åŸŸå+IPï¼šç›´æ¥è¿æ¥ï¼ˆæ¬¡é«˜ä¼˜å…ˆçº§ï¼‰
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,cn_ip,DIRECT
  # 3. éä¸­å›½å¤§é™†åŸŸåï¼šèµ°è‡ªåŠ¨é€‰æ‹©ï¼ˆé€šç”¨ä»£ç†è§„åˆ™ï¼‰
  - RULE-SET,geolocation-!cn,è‡ªåŠ¨é€‰æ‹©
  # 4. å…œåº•è§„åˆ™ï¼šæœªåŒ¹é…è¯·æ±‚èµ°è‡ªåŠ¨é€‰æ‹©ï¼ˆä¿®å¤ç‚¹4ï¼šç§»é™¤å¤šä½™å¼•å·ï¼Œç»Ÿä¸€æ ¼å¼ï¼‰
  - MATCH,è‡ªåŠ¨é€‰æ‹©ï¼Œè¿è¡Œåå›¾ç‰‡ä¸Šçš„é”™è¯¯ä¿¡æ¯ï¼Œè¯·ä¼˜åŒ–å®Œå–„é…ç½®ï¼Œå¹¶é‡æ–°ç”Ÿæˆä¸€ä»½å®Œæ•´çš„é…ç½®
